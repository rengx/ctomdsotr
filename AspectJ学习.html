<!doctype html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="AOP," />





  <link rel="alternate" href="/atom.xml" title="Ctomdsotr" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="AspectJ ，Java语言的AOP(Aspect-Oritend Programming)扩展。 Introduction to AspectJ（主要是在官网学习时的笔记） 1.pointcuts 切入点2.advice3.inter-type declarations 类型间声明4.aspects 方面 pointcuts和advice动态的影响程序流，inter-type declarat">
<meta name="keywords" content="AOP">
<meta property="og:type" content="article">
<meta property="og:title" content="AspectJ学习">
<meta property="og:url" content="http://ctomdsotr.com/AspectJ学习.html">
<meta property="og:site_name" content="Ctomdsotr">
<meta property="og:description" content="AspectJ ，Java语言的AOP(Aspect-Oritend Programming)扩展。 Introduction to AspectJ（主要是在官网学习时的笔记） 1.pointcuts 切入点2.advice3.inter-type declarations 类型间声明4.aspects 方面 pointcuts和advice动态的影响程序流，inter-type declarat">
<meta property="og:image" content="http://ctomdsotr.com/index_files/d88b0746-1755-488e-b822-addca3002f92.png">
<meta property="og:updated_time" content="2017-07-07T05:03:31.779Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AspectJ学习">
<meta name="twitter:description" content="AspectJ ，Java语言的AOP(Aspect-Oritend Programming)扩展。 Introduction to AspectJ（主要是在官网学习时的笔记） 1.pointcuts 切入点2.advice3.inter-type declarations 类型间声明4.aspects 方面 pointcuts和advice动态的影响程序流，inter-type declarat">
<meta name="twitter:image" content="http://ctomdsotr.com/index_files/d88b0746-1755-488e-b822-addca3002f92.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://ctomdsotr.com/AspectJ学习.html"/>





  <title> AspectJ学习 | Ctomdsotr </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ctomdsotr</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">心怀千里梦想，依然行在路上</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            Commonweal 404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://ctomdsotr.com/AspectJ学习.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alwill">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ctomdsotr">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                AspectJ学习
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-24T23:31:12+08:00">
                2017-06-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">Programming</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>AspectJ ，Java语言的AOP(Aspect-Oritend Programming)扩展。</p>
<h1 id="Introduction-to-AspectJ"><a href="#Introduction-to-AspectJ" class="headerlink" title="Introduction to AspectJ"></a>Introduction to AspectJ</h1><p><em>（主要是在官网学习时的笔记）</em></p>
<p>1.pointcuts 切入点<br>2.advice<br>3.inter-type declarations 类型间声明<br>4.aspects 方面</p>
<p>pointcuts和advice动态的影响程序流，inter-type declarations静态的影响程序的类层级，aspects封装了这些构造。<br>(pointcuts and advice dynamically affect program flow, inter-type decalrations statically affects program’s class hierarchy, and aspects encapsulate these new constructs.)</p>
<p>join point是程序流中定义明确的点，pointcut会挑选处join point和这些点处的值，advice是程序运行至join point时执行的代码。这些就是AspectJ的动态部分。<br>(A <em>join point</em> is a well-defined point in the program flow. A <em>pointcut</em> picks out certain join points and values at those points. A piece of <em>advice</em> is code that is excuted when a join point is reached. These are the dynamic part of AspectJ.)</p>
<p>AspectJ 还有不同种类的inter-type declarations, 这些，允许程序员修改程序的结果，也就是类的数量和类之间的关系。<br>(AspectJ alse has defferent kinds of <em>inter-type declarations</em> that allow the programmer to modify a program’s sturcture, namely, the members of classes and the relationship between classes.)</p>
<p>AspectJ的aspect是横切问题的模块化单元。<br>(AspectJ’s <em>aspect</em> are the unit of modularity for crosscutting concerns. They behave somewhat like Java classes, but may alse include pointcuts, advice and inter-type declarations.)</p>
<h2 id="The-Dynamic-Join-Point-Model"><a href="#The-Dynamic-Join-Point-Model" class="headerlink" title="The Dynamic Join Point Model"></a>The Dynamic Join Point Model</h2><p>The join point model provides the common frame of reference that make it possible to define the dynamic structure of crosscutting concerns.<br>AspectJ provides for many kinds of join points. One of them is method call join point.</p>
<p>method call join points 包含接收防范调用的对象的行为，它包括构成方法调用的所有行为，从所有参数被评估之后开始，还包括返回（正常返回或抛出异常）。<br>(A method call join points encompasses the actions of an object receiving a method call. It includes all the actions that comprise a method call, starting after all arguments are evaluated up to and including return (either normally or by throwing an exception).)</p>
<p>运行时的每次方法调用都是不同的join point，尽管它来自程序中相同的调用表达式。许多其他的join point可以在一个method call join point执行的同时运行——当执行方法体时发生的所有连接点，以及在这些方法中调用的方法。我们说这些join point在原始join point的动态上下文中执行。<br>(Each method call at runtime is a different join point, even if it comes from the same call expression in the program. Many other join point may run while a method call join point is executing – all the join points that happen while executing the method body, and in those methods called from the body. we say that these join points execute in the dynamic context of the original call join point.)</p>
<h2 id="Pointcuts"><a href="#Pointcuts" class="headerlink" title="Pointcuts"></a>Pointcuts</h2><p>基于显式的方法签名的列举，即name-based crosscutting。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//1</div><div class="line">call(void Point.setX(int))</div><div class="line"></div><div class="line">//2</div><div class="line">call(void Point.setX(int)) ||</div><div class="line">call(void Point.setY(int))</div><div class="line"></div><div class="line">//3</div><div class="line">pointcut move():</div><div class="line">    call(void FigureElement.setXY(int,int)) ||</div><div class="line">    call(void Point.setX(int))              ||</div><div class="line">    call(void Point.setY(int))              ||</div><div class="line">    call(void Line.setP1(Point))            ||</div><div class="line">    call(void Line.setP2(Point));</div></pre></td></tr></table></figure></p>
<p>基于方法的属性而不是准确的名字来指定pointcut，即property-based crosscutting。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//wildcards</div><div class="line">call(void Figure.make*(..))</div><div class="line">call(public * Figure.* (..))</div><div class="line"></div><div class="line">//cflow</div><div class="line">cflow(move())</div></pre></td></tr></table></figure></p>
<h2 id="Advice"><a href="#Advice" class="headerlink" title="Advice"></a>Advice</h2><p>pointcuts选出join point，但是它并没有做什么事情。为了实现横切行为，我们使用advice。</p>
<p>Advice brings together a pointcut(to pick out join points) and a body of code(to run at each of those join points).</p>
<p>AspectJ有几个不同的advice。<br><em>before advice</em><br><em>after advice</em>，包括after returning, after throwing, after</p>
<h3 id="Exposing-context-in-Pointcuts"><a href="#Exposing-context-in-Pointcuts" class="headerlink" title="Exposing context in Pointcuts"></a>Exposing context in Pointcuts</h3><p>Pointcuts not only pick out join points, they can alse expose part of execution context at their join points.Values exposed by a pointcut can be used in the body of advice declarations.</p>
<p>An advice declaration has a parameter list(like a method)that gives names to all the pieces of context that it uses. For example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">after(FigureElement fe, int x, int y) returning:</div><div class="line">        ...SomePointcut... &#123;</div><div class="line">    ...SomeBody...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The body of the advice uses the names just like method parameters, so<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">after(FigureElement fe, int x, int y) returning:</div><div class="line">        ...SomePointcut... &#123;</div><div class="line">    System.out.println(fe + &quot; moved to (&quot; + x + &quot;, &quot; + y + &quot;)&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="安装aspectj"><a href="#安装aspectj" class="headerlink" title="安装aspectj"></a>安装aspectj</h2><p>aspect安装下载，<br>官网地址，速度可能会慢：<a href="http://www.eclipse.org/aspectj/downloads.php#install" target="_blank" rel="external">http://www.eclipse.org/aspectj/downloads.php#install</a><br>也可使用：<a href="http://download.csdn.net/detail/smaiiboy/9477346" target="_blank" rel="external">http://download.csdn.net/detail/smaiiboy/9477346</a></p>
<p>笔者下载的是最新稳定版（Latest Stable Release）：aspectj-1.8.10.jar（下载时间2017/7/7），这是一个可执行jar，有别于我们通常使用的静态jar包。下载后使用jar命令安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -jar &#123;jar包位置&#125;/aspectj-1.8.10.jar</div></pre></td></tr></table></figure></p>
<p>运行后会看到安装界面，安装后如下：<br><img src="index_files/d88b0746-1755-488e-b822-addca3002f92.png" alt="安装成功图"></p>
<h2 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h2><p>AspectJ需要专门的JDK来编译，可以使用IDE插件比如Eclipse AJDT开发，也可以使用注解方式（AspectJ1.5版本或更新）。</p>
<h3 id="使用注解开发"><a href="#使用注解开发" class="headerlink" title="使用注解开发"></a>使用注解开发</h3><p>笔者使用Maven来构建的，使用的Mojo的aspectj-maven-plugin <a href="http://mojo.codehaus.org/aspectj-maven-plugin/" target="_blank" rel="external">http://mojo.codehaus.org/aspectj-maven-plugin/</a> 。<br>（从<a href="http://blog.csdn.net/zl3450341/article/details/7673942" target="_blank" rel="external">http://blog.csdn.net/zl3450341/article/details/7673942</a> 获悉的Maven编译插件，感谢博主！）</p>
<p>pom.xml配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;</div><div class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line">    &lt;groupId&gt;com.ctomdsotr.study&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;aspect&lt;/artifactId&gt;</div><div class="line">    &lt;packaging&gt;war&lt;/packaging&gt;</div><div class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</div><div class="line">    &lt;name&gt;aspect Maven Webapp&lt;/name&gt;</div><div class="line">    &lt;url&gt;http://maven.apache.org&lt;/url&gt;</div><div class="line">    &lt;properties&gt;</div><div class="line">        &lt;aspectjrt.version&gt;1.8.10&lt;/aspectjrt.version&gt;</div><div class="line">    &lt;/properties&gt;</div><div class="line">    &lt;dependencies&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;$&#123;aspectjrt.version&#125;&lt;/version&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line"></div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;$&#123;aspectjrt.version&#125;&lt;/version&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line"></div><div class="line">    &lt;build&gt;</div><div class="line">        &lt;pluginManagement&gt;</div><div class="line">            &lt;plugins&gt;</div><div class="line">                &lt;plugin&gt;</div><div class="line">                    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;</div><div class="line">                    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;</div><div class="line">                    &lt;version&gt;1.8&lt;/version&gt;</div><div class="line">                    &lt;configuration&gt;</div><div class="line">                        &lt;!-- 选择大于1.5的版本，因为使用的是aspectj的注解方式 --&gt;</div><div class="line">                        &lt;complianceLevel&gt;1.8&lt;/complianceLevel&gt;</div><div class="line">                        &lt;source&gt;1.8&lt;/source&gt;</div><div class="line">                        &lt;target&gt;1.8&lt;/target&gt;</div><div class="line">                        &lt;sources&gt;</div><div class="line">                            &lt;source&gt;</div><div class="line">                                &lt;basedir&gt;src/main/java&lt;/basedir&gt;</div><div class="line">                                &lt;includes&gt;</div><div class="line">                                    &lt;include&gt;**/UserAspect.java&lt;/include&gt;</div><div class="line">                                    &lt;include&gt;**/UserServiceImpl.java&lt;/include&gt;  &lt;!-- 不仅是aspect,还有其他的，不然只会编译aspect，没有办法测试，运行时会报错误: 找不到或无法加载主类 --&gt;</div><div class="line">                                &lt;/includes&gt;</div><div class="line">                            &lt;/source&gt;</div><div class="line">                        &lt;/sources&gt;</div><div class="line">                    &lt;/configuration&gt;</div><div class="line">                    &lt;executions&gt;</div><div class="line">                        &lt;execution&gt;</div><div class="line">                            &lt;goals&gt;</div><div class="line">                                &lt;goal&gt;compile&lt;/goal&gt;</div><div class="line">                            &lt;/goals&gt;</div><div class="line">                        &lt;/execution&gt;</div><div class="line">                    &lt;/executions&gt;</div><div class="line">                &lt;/plugin&gt;</div><div class="line">            &lt;/plugins&gt;</div><div class="line">        &lt;/pluginManagement&gt;</div><div class="line">    &lt;/build&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure></p>
<p>源码会放在github上。</p>
<p>具体的步骤笔者不在赘述，从官网或搜索引擎上都能找到资料，足以帮助开发者学习。笔者列举一下自己遇到的问题，如果有其他人正好遇到，希望能有所帮助。</p>
<h4 id="如何编译"><a href="#如何编译" class="headerlink" title="如何编译"></a>如何编译</h4><p>配置好上述pom，然后使用mvn aspectj:complile 编译，在eclipse中，就是在项目或pom.xml上右键”Run As”，选择”Build build…”，填入”aspectj:complile” 。</p>
<h4 id="编译时报错（没有加-aspect）"><a href="#编译时报错（没有加-aspect）" class="headerlink" title="编译时报错（没有加@aspect）"></a>编译时报错（没有加@aspect）</h4><h4 id="编译时提示http-servet-httpServert"><a href="#编译时提示http-servet-httpServert" class="headerlink" title="编译时提示http.servet.httpServert"></a>编译时提示http.servet.httpServert</h4><h4 id="编译成功，但是没有执行切面的advices"><a href="#编译成功，但是没有执行切面的advices" class="headerlink" title="编译成功，但是没有执行切面的advices"></a>编译成功，但是没有执行切面的advices</h4><h4 id="编译成功，但是只执行切面的advice-原来的方法被覆盖了，没有执行"><a href="#编译成功，但是只执行切面的advice-原来的方法被覆盖了，没有执行" class="headerlink" title="编译成功，但是只执行切面的advice,原来的方法被覆盖了，没有执行"></a>编译成功，但是只执行切面的advice,原来的方法被覆盖了，没有执行</h4><h3 id="使用AJDT开发"><a href="#使用AJDT开发" class="headerlink" title="使用AJDT开发"></a>使用AJDT开发</h3><p>官网下载地址：<a href="http://www.eclipse.org/aspectj/downloads.php" target="_blank" rel="external">http://www.eclipse.org/aspectj/downloads.php</a></p>
<p>[AJDT for Eclipse：<a href="http://www.eclipse.org/ajdt/" target="_blank" rel="external">http://www.eclipse.org/ajdt/</a><br>其他IDEs: <a href="http://www.eclipse.org/aspectj/downloads.php#ides" target="_blank" rel="external">http://www.eclipse.org/aspectj/downloads.php#ides</a>]</p>
<p><em>（笔者只是写了一个例子，先贴一下代码）</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">/**先写一个java class*/</div><div class="line">package com.ctomdsotr.study.aspectj.user;</div><div class="line">public class User &#123;</div><div class="line">    private String userName;</div><div class="line">    private String userId;</div><div class="line"></div><div class="line">    public void addUser(String userId, String userName) &#123;</div><div class="line">        this.userId = userId;</div><div class="line">        this.userName = userName;</div><div class="line">        System.out.println(&quot;added &quot;+userId);</div><div class="line">    &#125;</div><div class="line">    public String getUser(String userId) &#123;</div><div class="line">        return userName;</div><div class="line">    &#125;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        User user = new User();</div><div class="line">        user.addUser(&quot;1&quot;, &quot;2&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**创建一个切面*/</div><div class="line">package com.ctomdsotr.study.aspectj.user.aspect;</div><div class="line">import com.ctomdsotr.study.aspectj.user.User;</div><div class="line">public aspect FirstAspect &#123;</div><div class="line">    pointcut addUser(String userId, String userName): execution(void User.addUser(String, String)) &amp;&amp; args(userId, userName);</div><div class="line">    after(String userId, String userName) returning : addUser(userId, userName)&#123;</div><div class="line">        System.out.println(userId + &quot;:&quot; + userName);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**最后运行User，控制台输出*/</div><div class="line">added 1</div><div class="line">1:2</div></pre></td></tr></table></figure></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><blockquote>
<p>AspectJ Doc<br>  <a href="http://www.eclipse.org/aspectj/doc/released/adk15notebook/ataspectj.html" target="_blank" rel="external">http://www.eclipse.org/aspectj/doc/released/adk15notebook/ataspectj.html</a><br>Maven Plugin<br>  <a href="http://www.mojohaus.org/aspectj-maven-plugin/index.html" target="_blank" rel="external">http://www.mojohaus.org/aspectj-maven-plugin/index.html</a><br>Maven Jar<br>  <a href="http://mvnrepository.com/artifact/org.aspectj" target="_blank" rel="external">http://mvnrepository.com/artifact/org.aspectj</a><br>AspectJ 安装文件<br>  <a href="http://download.csdn.net/detail/smaiiboy/9477346" target="_blank" rel="external">http://download.csdn.net/detail/smaiiboy/9477346</a><br>两个挺好的博客<br>  <a href="http://blog.csdn.net/zl3450341/article/details/7673942" target="_blank" rel="external">http://blog.csdn.net/zl3450341/article/details/7673942</a><br>  <a href="http://blog.csdn.net/ccj659/article/details/53302951" target="_blank" rel="external">http://blog.csdn.net/ccj659/article/details/53302951</a></p>
</blockquote>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/AOP/" rel="tag"># AOP</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Java编程思想之面向对象.html" rel="next" title="Java编程思想之面向对象">
                <i class="fa fa-chevron-left"></i> Java编程思想之面向对象
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/书单.html" rel="prev" title="书单">
                书单 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Alwill" />
          <p class="site-author-name" itemprop="name">Alwill</p>
           
              <p class="site-description motion-element" itemprop="description">刚刚上路的小码农</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/rengzailushang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/rengzailushang" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction-to-AspectJ"><span class="nav-number">1.</span> <span class="nav-text">Introduction to AspectJ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Dynamic-Join-Point-Model"><span class="nav-number">1.1.</span> <span class="nav-text">The Dynamic Join Point Model</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pointcuts"><span class="nav-number">1.2.</span> <span class="nav-text">Pointcuts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Advice"><span class="nav-number">1.3.</span> <span class="nav-text">Advice</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Exposing-context-in-Pointcuts"><span class="nav-number">1.3.1.</span> <span class="nav-text">Exposing context in Pointcuts</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用"><span class="nav-number">2.</span> <span class="nav-text">使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装aspectj"><span class="nav-number">2.1.</span> <span class="nav-text">安装aspectj</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开发"><span class="nav-number">2.2.</span> <span class="nav-text">开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用注解开发"><span class="nav-number">2.2.1.</span> <span class="nav-text">使用注解开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如何编译"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">如何编译</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编译时报错（没有加-aspect）"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">编译时报错（没有加@aspect）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编译时提示http-servet-httpServert"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">编译时提示http.servet.httpServert</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编译成功，但是没有执行切面的advices"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">编译成功，但是没有执行切面的advices</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编译成功，但是只执行切面的advice-原来的方法被覆盖了，没有执行"><span class="nav-number">2.2.1.5.</span> <span class="nav-text">编译成功，但是只执行切面的advice,原来的方法被覆盖了，没有执行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用AJDT开发"><span class="nav-number">2.2.2.</span> <span class="nav-text">使用AJDT开发</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考"><span class="nav-number">3.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alwill</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  





  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
